import{r as h,j as e,N as ue,L as xe,a as me,u as je,b as Ne}from"./index-BvF7o93h.js";import{P as L,B as Te}from"./Button-DQhYA9KM.js";import{c as K,C as ae,N as le,g as J,d as ke,f as de}from"./mainFunction-DMZW-ZC-.js";import pe from"./Loader-Cs6m3xQA.js";const Ce="data:image/svg+xml,%3csvg%20width='25'%20height='25'%20viewBox='0%200%2025%2025'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M24.5%2014H14V24.5H10.5V14H0V10.5H10.5V0H14V10.5H24.5V14Z'%20fill='%23969696'/%3e%3c/svg%3e",P="data:image/svg+xml,%3csvg%20width='20'%20height='20'%20viewBox='0%200%2016%2018'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M3%2018C2.45%2018%201.979%2017.804%201.587%2017.412C1.195%2017.02%200.999333%2016.5493%201%2016V3H0V1H5V0H11V1H16V3H15V16C15%2016.55%2014.804%2017.021%2014.412%2017.413C14.02%2017.805%2013.5493%2018.0007%2013%2018H3ZM5%2014H7V5H5V14ZM9%2014H11V5H9V14Z'%20fill='%23D60000'/%3e%3c/svg%3e",ge=({func:d})=>{var z,O,V,$,H,E,M,U,R,_,D,W,Z,c,r,m,f,G;const[s,t]=h.useState({quizName:"",quizType:"",questions:[]}),[C,w]=h.useState(""),[x,a]=h.useState(!1),[g,T]=h.useState(1),[l,y]=h.useState(1),[N,o]=h.useState(!1),q=h.useRef(null);h.useEffect(()=>{K()},[]);const Q=()=>{T(1),y(1),t(i=>({...i,questions:[]}))},u=i=>{t(n=>({...n,questions:n.questions.map(p=>p.id===l?{...p,optionType:i}:p)}))},k=i=>{q.current&&!q.current.contains(i.target)&&d()},b=()=>{s.quizName&&s.quizType?(T(2),t(i=>({...i,questions:[...i.questions,{id:l,question:"",options:[],answer:null,optionType:null,timer:null}]}))):alert("Please fill all the fields")},B=i=>{t(n=>({...n,questions:n.questions.map(p=>p.id===l?{...p,options:p.options.filter((v,te)=>te!==i)}:p)}))},A=()=>{t(i=>({...i,questions:i.questions.map(n=>n.id===l?{...n,options:[...n.options,""]}:n)}))},oe=()=>{t(i=>({...i,questions:i.questions.filter(n=>n.id!==l)})),y(i=>Math.max(i-1,1))},ce=()=>{if(s.questions.length>=5){alert("Maximum of 5 questions allowed.");return}S()&&(y((s==null?void 0:s.questions.length)+1),t(i=>({...i,questions:[...i.questions,{id:l+1,question:"",options:[],answer:null,optionType:null,timer:null}]})))},re=i=>{const n=i.target.value;t(p=>({...p,questions:p.questions.map(v=>v.id===l?{...v,question:n}:v)}))},F=i=>{t(n=>({...n,questions:n.questions.map(p=>p.id===l?{...p,answer:i}:p)}))},I=(i,n,p)=>{const v=n.target.value;t(te=>({...te,questions:te.questions.map(ne=>ne.id===l?{...ne,options:ne.options.map((he,ve)=>ve===i?{...he,[p]:v}:he)}:ne)}))},j=i=>{t(n=>({...n,questions:n.questions.map(p=>p.id===l?{...p,timer:i}:p)}))},X=()=>{navigator.clipboard.writeText(C),a(!0),setTimeout(()=>{a(!1)},5e3)},S=()=>{const i=s.questions[l-1];return i.question?i.optionType?i.options.length<2?(alert("Please provide at least two options."),!1):i.options.some(n=>n==="")?(alert("Please fill all option fields."),!1):s.quizType==="Q & A"&&i.answer===null?(alert("Please select a correct answer."),!1):!0:(alert("Please select an option type."),!1):(alert("Please fill in the question text."),!1)},Y=()=>{if(!s.quizName)return alert("Please enter a quiz name."),!1;if(!s.quizType)return alert("Please select a quiz type."),!1;for(let i=0;i<s.questions.length;i++)if(s.questions[i],!S())return alert(`Validation failed for question ${i+1}. Please check.`),!1;return!0},ee=async i=>{o(!0);try{const n=await fetch("https://server-final.up.railway.app/api/quiz",{method:"POST",headers:{"Content-Type":"application/json",Authorization:J("token")},body:JSON.stringify(i)});if(!n.ok)throw new Error("Network response was not ok.");const p=await n.json();w("https://server-final.up.railway.app/quiz/"+p.quizId),T(3)}catch(n){console.error("Failed to send quiz data:",n),alert("Failed to create quiz. Please try again.")}o(!1)},se=()=>{Y()&&(console.log(s),ee(s))};return e.jsx("section",{className:"create-quiz",onClick:k,children:N?e.jsx(pe,{}):e.jsxs(e.Fragment,{children:[g===1&&e.jsxs("div",{className:"createQuizWrapper",ref:q,children:[e.jsx("input",{type:"text",placeholder:"Quiz name",value:s==null?void 0:s.quizName,onChange:i=>{t(n=>({...n,quizName:i.target.value}))}}),e.jsxs("div",{className:"quizType",children:[e.jsx("label",{htmlFor:"quizType",children:"Quiz Type"}),e.jsx("input",{className:s.quizType==="Q & A"?"selected":"",type:"button",value:"Q & A",onClick:i=>t(n=>({...n,quizType:i.target.value}))}),e.jsx("input",{className:s.quizType==="Poll Type"?"selected":"",type:"button",value:"Poll Type",onClick:i=>t(n=>({...n,quizType:i.target.value}))})]}),e.jsxs("div",{className:"actionBtns",children:[e.jsx("button",{onClick:d,children:"Cancel"}),e.jsx("button",{onClick:b,children:"Continue"})]})]}),g===2&&e.jsxs("div",{className:"addQuestions createQuizWrapper",ref:q,children:[e.jsxs("div",{className:"questionsWrapper",children:[e.jsxs("div",{className:"questionHeader",children:[e.jsxs("div",{className:"questionCount",children:[s.questions.map((i,n)=>e.jsxs("div",{className:"count",onClick:()=>y(n+1),children:[e.jsx("span",{children:n+1}),(s==null?void 0:s.questions[l-1])===s.questions[n]&&e.jsx("div",{className:"delete",onClick:oe,children:e.jsx("img",{src:ae,alt:"delete question"})})]},n)),s.questions.length<5&&e.jsx("div",{className:"addBtn",onClick:ce,children:e.jsx("img",{src:Ce,alt:"add question"})})]}),e.jsx("p",{children:"Max 5 questions"})]}),e.jsxs("div",{className:"questionContainer",children:[e.jsx("input",{type:"text",placeholder:s.quizType==="Q & A"?"Question":"Poll",onChange:re,value:((z=s.questions[l-1])==null?void 0:z.question)||""}),e.jsxs("div",{className:"optionType",children:[e.jsx("label",{htmlFor:"optionType",children:"Option Type"}),e.jsxs("div",{className:"typeGroup",children:[e.jsx("input",{type:"radio",name:"optionType",id:"text",checked:((O=s.questions[l-1])==null?void 0:O.optionType)==="text",onChange:()=>u("text")}),e.jsx("label",{htmlFor:"text",children:"Text"})]}),e.jsxs("div",{className:"typeGroup",children:[e.jsx("input",{type:"radio",name:"optionType",id:"image",checked:((V=s.questions[l-1])==null?void 0:V.optionType)==="image",onChange:()=>u("image")}),e.jsx("label",{htmlFor:"image",children:"Image URL"})]}),e.jsxs("div",{className:"typeGroup",children:[e.jsx("input",{type:"radio",name:"optionType",id:"T&I",checked:(($=s.questions[l-1])==null?void 0:$.optionType)==="text and image",onChange:()=>u("text and image")}),e.jsx("label",{htmlFor:"T&I",children:"Text & Image URL"})]})]}),e.jsxs("div",{className:"option-group",children:[((H=s.questions[l-1])==null?void 0:H.optionType)==="text"?e.jsxs("div",{className:"options",children:[(E=s.questions[l-1])==null?void 0:E.options.map((i,n)=>{var p;return e.jsxs("div",{className:"optionItem",children:[(s==null?void 0:s.quizType)==="Q & A"&&e.jsx("div",{className:`checkBox ${((p=s==null?void 0:s.questions[l-1])==null?void 0:p.answer)===n?"selected":""}`,onClick:()=>F(n),children:e.jsx("span",{})}),e.jsx("input",{type:"text",value:i.text||"",placeholder:"Text",onChange:v=>I(n,v,"text")}),e.jsx("img",{src:P,alt:"delete option",className:"deleteOption",onClick:()=>B(n)})]},n)}),((M=s.questions[l-1])==null?void 0:M.options.length)<4&&((U=s.questions[l-1])==null?void 0:U.optionType)&&e.jsx("div",{className:"addBtn",onClick:A,children:"Add Option"})]}):((R=s.questions[l-1])==null?void 0:R.optionType)==="image"?e.jsxs("div",{className:"options",children:[(_=s.questions[l-1])==null?void 0:_.options.map((i,n)=>{var p;return e.jsxs("div",{className:"optionItem",children:[e.jsx("div",{className:`checkBox ${((p=s==null?void 0:s.questions[l-1])==null?void 0:p.answer)===n?"selected":""}`,onClick:()=>F(n),children:e.jsx("span",{})}),e.jsx("input",{type:"text",value:i.image||"",placeholder:"Image URL",onChange:v=>I(n,v,"image")}),e.jsx("img",{src:P,alt:"delete option",className:"deleteOption",onClick:()=>B(n)})]},n)}),((D=s.questions[l-1])==null?void 0:D.options.length)<4&&((W=s.questions[l-1])==null?void 0:W.optionType)&&e.jsx("div",{className:"addBtn",onClick:A,children:"Add Option"})]}):e.jsxs("div",{className:"options",children:[(Z=s.questions[l-1])==null?void 0:Z.options.map((i,n)=>{var p;return e.jsxs("div",{className:"optionItem",children:[e.jsx("div",{className:`checkBox ${((p=s==null?void 0:s.questions[l-1])==null?void 0:p.answer)===n?"selected":""}`,onClick:()=>F(n),children:e.jsx("span",{})}),e.jsx("input",{type:"text",value:i.text||"",placeholder:"Text",style:{maxWidth:"255px"},onChange:v=>I(n,v,"text")}),e.jsx("input",{type:"text",value:i.image||"",placeholder:"Image URL",style:{maxWidth:"255px"},onChange:v=>I(n,v,"image")}),e.jsx("img",{src:P,alt:"delete option",className:"deleteOption",onClick:()=>B(n)})]},n)}),((c=s.questions[l-1])==null?void 0:c.options.length)<4&&((r=s.questions[l-1])==null?void 0:r.optionType)&&e.jsx("div",{className:"addBtn",onClick:A,children:"Add Option"})]}),(s==null?void 0:s.quizType)==="Q & A"&&e.jsxs("div",{className:"timer",children:[e.jsx("p",{children:"Timer"}),e.jsxs("div",{className:"timerBtns",children:[e.jsx("input",{type:"button",value:"OFF",className:`${(m=s==null?void 0:s.questions[l-1])!=null&&m.timer?"":"selected"}`,onClick:()=>j(null)}),e.jsx("input",{type:"button",value:"5 sec",className:`${((f=s==null?void 0:s.questions[l-1])==null?void 0:f.timer)===5?"selected":""}`,onClick:()=>j(5)}),e.jsx("input",{type:"button",value:"10 sec",className:`${((G=s==null?void 0:s.questions[l-1])==null?void 0:G.timer)===10?"selected":""}`,onClick:()=>j(10)})]})]})]})]})]}),e.jsxs("div",{className:"actionBtns",children:[e.jsx("button",{onClick:Q,children:"Back"}),e.jsx("button",{onClick:se,children:"Create Quiz"})]})]}),g==3&&e.jsxs("div",{className:"createQuizWrapper",children:[e.jsxs("div",{className:"sharePage",ref:q,children:[e.jsx("img",{src:ae,alt:"close button",onClick:d,className:"closeBtn"}),e.jsx("h2",{children:"Congrats your Quiz is Published!"}),e.jsx("p",{children:C}),e.jsx("button",{onClick:X,children:"Share"})]}),x&&e.jsx(le,{text:"Link Copied to Clipboard",func:()=>a(!1)})]})]})})};ge.propTypes={func:L.func.isRequired};const we=()=>{const[d,s]=h.useState(!1),t=()=>{ke("token"),window.location.reload()},C=h.useCallback(e.jsx(ge,{func:()=>s(!1)}),[]);return e.jsxs("aside",{children:[e.jsx("h2",{children:"QUIZZIE"}),e.jsx("div",{className:"navigateLinks",children:e.jsxs("ul",{children:[e.jsx("li",{children:e.jsx(ue,{to:"/admin/dashboard",children:"Dashboard"})}),e.jsx("li",{children:e.jsx(ue,{to:"/admin/analytics",children:"Analytics"})}),e.jsx("li",{children:e.jsx("button",{onClick:()=>s(!0),children:"Create Quiz"})})]})}),d&&C,e.jsx("div",{className:"logoutBtn",children:e.jsx(Te,{type:"button",text:"Logout",func:t})})]})},ie=({number:d,text:s,anotherText:t,color:C})=>e.jsx("div",{style:{color:C},className:"info-button",children:e.jsxs("div",{className:"info-button-text",children:[e.jsxs("div",{className:"group",children:[e.jsx("span",{children:d>1e6?`${(d/1e6).toFixed(1)}m`:d>1e3?`${(d/1e3).toFixed(1)}k`:d}),e.jsxs("span",{children:[" ",s]})]}),e.jsx("span",{children:t})]})});ie.propTypes={number:L.number,text:L.string,anotherText:L.string,color:L.string};const qe="data:image/svg+xml,%3csvg%20width='18'%20height='18'%20viewBox='0%200%2018%2018'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M9%2015.375C12.7279%2015.375%2015.75%2012.2542%2015.75%2010.125C15.75%207.99575%2012.7279%204.875%209%204.875C5.27213%204.875%202.25%207.998%202.25%2010.125C2.25%2012.252%205.27213%2015.375%209%2015.375Z'%20stroke='%23FF5D01'%20stroke-width='1.5'%20stroke-linejoin='round'/%3e%3cpath%20d='M9%2012.375C9.59674%2012.375%2010.169%2012.1379%2010.591%2011.716C11.0129%2011.294%2011.25%2010.7217%2011.25%2010.125C11.25%209.52826%2011.0129%208.95597%2010.591%208.53401C10.169%208.11205%209.59674%207.875%209%207.875C8.40326%207.875%207.83097%208.11205%207.40901%208.53401C6.98705%208.95597%206.75%209.52826%206.75%2010.125C6.75%2010.7217%206.98705%2011.294%207.40901%2011.716C7.83097%2012.1379%208.40326%2012.375%209%2012.375Z'%20stroke='%23FF5D01'%20stroke-width='1.5'%20stroke-linejoin='round'/%3e%3cpath%20d='M4.974%204.22475L5.94675%205.58225M13.3594%204.39125L12.3862%205.74875M9.00337%202.625V4.875'%20stroke='%23FF5D01'%20stroke-width='1.5'%20stroke-linecap='round'/%3e%3c/svg%3e",be=()=>{const[d,s]=h.useState(!1),[t,C]=h.useState([]);async function w(){s(!0),await fetch("https://server-final.up.railway.app/api/quiz",{method:"GET",headers:{"Content-Type":"application/json",Authorization:J("token")}}).then(x=>x.json()).then(x=>{x.code===200&&C(x.data)}),s(!1)}return h.useEffect(()=>{K(),w()},[]),e.jsx("section",{className:"dashboard",children:d?e.jsx(pe,{}):e.jsxs(e.Fragment,{children:[" ",e.jsxs("div",{className:"dashboard-header",children:[e.jsx(ie,{color:"#FF5D01",text:"Quiz",anotherText:"Created",number:t.length}),e.jsx(ie,{color:"#60B84B",text:"questions",anotherText:"Created",number:t.map(x=>x.questions.length).reduce((x,a)=>x+a,0)}),e.jsx(ie,{color:"#5076FF",text:"Total",anotherText:"Impressions",number:t.map(x=>x.impressions).reduce((x,a)=>x+a,0)})]}),e.jsxs("div",{className:"quizContainer",children:[e.jsx("h2",{children:"Trending Quizs"}),e.jsx("div",{className:"quizs",children:t.length>0?t.map(x=>e.jsxs("div",{className:"quiz",children:[e.jsxs("div",{className:"info",children:[e.jsx("h3",{children:x.quizName}),e.jsxs("div",{className:"views",children:[e.jsx("p",{children:x.impressions}),e.jsx("img",{src:qe,alt:"eye"})]})]}),e.jsx("p",{children:de(x.createdAt)})]},x._id)):e.jsx("p",{children:" Data not found!"})})]})]})})},Qe="data:image/svg+xml,%3csvg%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M21%2012C20.7348%2012%2020.4804%2012.1054%2020.2929%2012.2929C20.1054%2012.4804%2020%2012.7348%2020%2013V19C20%2019.2652%2019.8946%2019.5196%2019.7071%2019.7071C19.5196%2019.8946%2019.2652%2020%2019%2020H5C4.73478%2020%204.48043%2019.8946%204.29289%2019.7071C4.10536%2019.5196%204%2019.2652%204%2019V5C4%204.73478%204.10536%204.48043%204.29289%204.29289C4.48043%204.10536%204.73478%204%205%204H11C11.2652%204%2011.5196%203.89464%2011.7071%203.70711C11.8946%203.51957%2012%203.26522%2012%203C12%202.73478%2011.8946%202.48043%2011.7071%202.29289C11.5196%202.10536%2011.2652%202%2011%202H5C4.20435%202%203.44129%202.31607%202.87868%202.87868C2.31607%203.44129%202%204.20435%202%205V19C2%2019.7956%202.31607%2020.5587%202.87868%2021.1213C3.44129%2021.6839%204.20435%2022%205%2022H19C19.7956%2022%2020.5587%2021.6839%2021.1213%2021.1213C21.6839%2020.5587%2022%2019.7956%2022%2019V13C22%2012.7348%2021.8946%2012.4804%2021.7071%2012.2929C21.5196%2012.1054%2021.2652%2012%2021%2012ZM6%2012.76V17C6%2017.2652%206.10536%2017.5196%206.29289%2017.7071C6.48043%2017.8946%206.73478%2018%207%2018H11.24C11.3716%2018.0008%2011.5021%2017.9755%2011.6239%2017.9258C11.7457%2017.876%2011.8566%2017.8027%2011.95%2017.71L18.87%2010.78L21.71%208C21.8037%207.90704%2021.8781%207.79644%2021.9289%207.67458C21.9797%207.55272%2022.0058%207.42201%2022.0058%207.29C22.0058%207.15799%2021.9797%207.02728%2021.9289%206.90542C21.8781%206.78356%2021.8037%206.67296%2021.71%206.58L17.47%202.29C17.377%202.19627%2017.2664%202.12188%2017.1446%202.07111C17.0227%202.02034%2016.892%201.9942%2016.76%201.9942C16.628%201.9942%2016.4973%202.02034%2016.3754%202.07111C16.2536%202.12188%2016.143%202.19627%2016.05%202.29L13.23%205.12L6.29%2012.05C6.19732%2012.1434%206.12399%2012.2543%206.07423%2012.3761C6.02446%2012.4979%205.99924%2012.6284%206%2012.76ZM16.76%204.41L19.59%207.24L18.17%208.66L15.34%205.83L16.76%204.41ZM8%2013.17L13.93%207.24L16.76%2010.07L10.83%2016H8V13.17Z'%20fill='%23854CFF'/%3e%3c/svg%3e",Le="data:image/svg+xml,%3csvg%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M18%2022C17.1667%2022%2016.4583%2021.7083%2015.875%2021.125C15.2917%2020.5417%2015%2019.8333%2015%2019C15%2018.8833%2015.0083%2018.7623%2015.025%2018.637C15.0417%2018.5117%2015.0667%2018.3993%2015.1%2018.3L8.05%2014.2C7.76667%2014.45%207.45%2014.646%207.1%2014.788C6.75%2014.93%206.38333%2015.0007%206%2015C5.16667%2015%204.45833%2014.7083%203.875%2014.125C3.29167%2013.5417%203%2012.8333%203%2012C3%2011.1667%203.29167%2010.4583%203.875%209.875C4.45833%209.29167%205.16667%209%206%209C6.38333%209%206.75%209.071%207.1%209.213C7.45%209.355%207.76667%209.55067%208.05%209.8L15.1%205.7C15.0667%205.6%2015.0417%205.48767%2015.025%205.363C15.0083%205.23833%2015%205.11733%2015%205C15%204.16667%2015.2917%203.45833%2015.875%202.875C16.4583%202.29167%2017.1667%202%2018%202C18.8333%202%2019.5417%202.29167%2020.125%202.875C20.7083%203.45833%2021%204.16667%2021%205C21%205.83333%2020.7083%206.54167%2020.125%207.125C19.5417%207.70833%2018.8333%208%2018%208C17.6167%208%2017.25%207.92933%2016.9%207.788C16.55%207.64667%2016.2333%207.45067%2015.95%207.2L8.9%2011.3C8.93333%2011.4%208.95833%2011.5127%208.975%2011.638C8.99167%2011.7633%209%2011.884%209%2012C9%2012.1167%208.99167%2012.2377%208.975%2012.363C8.95833%2012.4883%208.93333%2012.6007%208.9%2012.7L15.95%2016.8C16.2333%2016.55%2016.55%2016.3543%2016.9%2016.213C17.25%2016.0717%2017.6167%2016.0007%2018%2016C18.8333%2016%2019.5417%2016.2917%2020.125%2016.875C20.7083%2017.4583%2021%2018.1667%2021%2019C21%2019.8333%2020.7083%2020.5417%2020.125%2021.125C19.5417%2021.7083%2018.8333%2022%2018%2022Z'%20fill='%2360B84B'/%3e%3c/svg%3e",fe=({func:d,id:s})=>e.jsx("div",{className:"delete-popup",children:e.jsxs("div",{className:"popWrapper",children:[e.jsx("h2",{children:"Are you confirm you want to delete ?"}),e.jsxs("div",{className:"btn-group",children:[e.jsx("button",{onClick:()=>d("delete",s),children:"Confirm Delete"}),e.jsx("button",{onClick:()=>d("cancel"),children:"Cancel"})]})]})});fe.propTypes={func:L.func,id:L.string};const Be=()=>{const[d,s]=h.useState(!1),[t,C]=h.useState(""),[w,x]=h.useState(null),[a,g]=h.useState(!1),[T,l]=h.useState(!1),[y,N]=h.useState([]),o=(u,k)=>{const B=`${window.location.origin}/quiz/${u}`;navigator.clipboard.writeText(B).then(()=>{s(!0),C("Link copied to clipboard"),setTimeout(()=>{s(!1)},5e3)}).catch(A=>console.log(A)),navigator.share({title:"Share Link",text:k,url:B})},q=async()=>{g(!0),await fetch("https://server-final.up.railway.app/api/quiz",{method:"GET",headers:{"Content-Type":"application/json",Authorization:J("token")}}).then(u=>u.json()).then(u=>{u.code===200&&N(u.data)}).catch(u=>console.log(u)),g(!1)};h.useEffect(()=>{K(),q()},[]);const Q=async(u,k)=>{g(!0),u==="delete"&&await fetch(`https://server-final.up.railway.app/api/quiz/${k}`,{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:J("token")}}).then(b=>b.json()).then(b=>{b.code===200&&(q(),l(!1))}),u==="cancel"&&l(!1),g(!1)};return e.jsxs("main",{className:"analytics",children:[a?e.jsx(pe,{}):e.jsxs(e.Fragment,{children:[e.jsx("h1",{children:"Quiz Analysis"}),e.jsx("div",{className:"tableContainer",children:e.jsxs("table",{children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"S.No"}),e.jsx("th",{children:"Quiz Name"}),e.jsx("th",{children:"Created On"}),e.jsx("th",{children:"Impressions"}),e.jsx("th",{}),e.jsx("th",{})]})}),e.jsx("tbody",{children:y.map((u,k)=>e.jsxs("tr",{children:[e.jsx("td",{children:k+1}),e.jsx("td",{children:u.quizName}),e.jsx("td",{children:de(u.createdAt)}),e.jsx("td",{children:u.impressions}),e.jsxs("td",{children:[e.jsx(xe,{to:"edit",state:u,className:"edit",children:e.jsx("img",{src:Qe,alt:"edit"})}),e.jsx("button",{className:"delete",onClick:()=>{l(!0),x(u._id)},children:e.jsx("img",{src:P,alt:"delete"})}),e.jsx("button",{className:"share",onClick:()=>o(u._id,u.quizName),children:e.jsx("img",{src:Le,alt:"share"})})]}),e.jsx("td",{children:e.jsx(xe,{to:`analytics/${u._id}`,children:"Question Wise Analysis"})})]},u._id))})]})})]}),d&&e.jsx(le,{text:t,func:()=>s(!1)}),T&&e.jsx(fe,{id:w,func:Q})]})},Ae=()=>{var w,x;const{QId:d}=me(),[s,t]=h.useState(null);h.useEffect(()=>{d&&fetch(`https://server-final.up.railway.app/api/quiz/${d}`).then(a=>a.json()).then(a=>{t(a.data)})},[]);const C=je();return h.useEffect(()=>{K(),d||C("/admin/dashboard")},[]),e.jsx("section",{className:"QnAAnalysis",children:s&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"qnaHeader",children:[e.jsxs("h1",{children:[s.quizName," : Analysis"]}),e.jsxs("p",{children:[e.jsxs("span",{children:["Created on: ",de(s.createdAt)]}),e.jsxs("span",{children:["Impressions: ",s.impressions]})]})]}),e.jsx("div",{className:"questionsContainer",children:(s==null?void 0:s.quizType)==="Q & A"?(w=s==null?void 0:s.questions)==null?void 0:w.map((a,g)=>e.jsxs("div",{className:"questionBox",children:[e.jsxs("div",{className:"question",children:["Q.",g+1," ",a.question]}),e.jsxs("div",{className:"analysisContainer",children:[e.jsxs("div",{className:"box",children:[e.jsx("h3",{children:a.totalAttempted}),e.jsx("p",{children:"people Attempted the question"})]}),e.jsxs("div",{className:"box",children:[e.jsx("h3",{children:a.correctAnswers}),e.jsx("p",{children:"people answered correctly"})]}),e.jsxs("div",{className:"box",children:[e.jsx("h3",{children:a.wrongAnswers}),e.jsx("p",{children:"people answered incorrectly"})]})]})]},g)):(x=s==null?void 0:s.questions)==null?void 0:x.map((a,g)=>{var T,l,y;return e.jsxs("div",{className:"questionBox",children:[e.jsxs("div",{className:"question",children:["Q.",g+1," ",a.question]}),e.jsx("div",{className:"pollContainer",children:a.optionType==="text"?(T=a==null?void 0:a.options)==null?void 0:T.map((N,o)=>e.jsxs("div",{className:"box",children:[e.jsx("h3",{children:a==null?void 0:a.optionCounts[o]}),e.jsx("p",{children:N.text})]},o)):a.optionType==="image"?(l=a==null?void 0:a.options)==null?void 0:l.map((N,o)=>e.jsxs("div",{className:"box",children:[e.jsx("h3",{children:a==null?void 0:a.optionCounts[o]}),e.jsx("img",{src:N.image,alt:"image"})]},o)):a.optionType==="text and image"?(y=a==null?void 0:a.options)==null?void 0:y.map((N,o)=>e.jsxs("div",{className:"box",children:[e.jsx("h3",{children:a==null?void 0:a.optionCounts[o]}),e.jsxs("div",{className:"imgOption",children:[e.jsx("p",{children:N.text}),e.jsx("img",{src:N.image,alt:"image"})]})]},o)):null})]},a._id)})})]})})},ye=({func:d,data:s})=>{var X,S,Y,ee,se,z,O,V,$,H,E,M,U,R,_,D,W,Z;const[t,C]=h.useState(s||{quizName:"",quizType:"",questions:[]}),[w,x]=h.useState(""),[a,g]=h.useState(!1),[T,l]=h.useState(1),[y,N]=h.useState(null),[o,q]=h.useState(0),Q=h.useRef(null);h.useEffect(()=>{var c;K(),N((c=t==null?void 0:t.questions[o])==null?void 0:c._id)},[]),h.useEffect(()=>{var c;N((c=t==null?void 0:t.questions[o])==null?void 0:c._id)},[o]);const u=c=>{Q.current&&!Q.current.contains(c.target)&&d()},k=(c,r,m)=>{const f=r.target.value;C(G=>({...G,questions:G.questions.map(i=>i._id===y?{...i,options:i.options.map((n,p)=>p===c?{...n,[m]:f}:n)}:i)}))},b=c=>{C(r=>({...r,questions:r.questions.map(m=>m._id===y?{...m,timer:c}:m)}))},B=()=>{navigator.clipboard.writeText(w),g(!0),setTimeout(()=>{g(!1)},5e3)},A=c=>c.question?c.optionType?c.options.length<2?(alert("Please provide at least two options."),!1):c.options.some(r=>!r.text&&!r.image)?(alert("Please fill all option fields."),!1):t.quizType==="Q & A"&&c.answer===void 0?(alert("Please select a correct answer."),!1):!0:(alert("Please select an option type."),!1):(alert("Please fill in the question text."),!1),oe=()=>{if(!t.quizName)return alert("Please enter a quiz name."),!1;if(!t.quizType)return alert("Please select a quiz type."),!1;for(let c=0;c<t.questions.length;c++){const r=t.questions[c];if(!A(r))return alert(`Validation failed for question ${c+1}. Please check.`),!1}return!0},ce=async c=>{try{const r=await fetch(`https://server-final.up.railway.app/api/quiz/${t==null?void 0:t._id}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:J("token")},body:JSON.stringify(c)});if(!r.ok)throw new Error("Network response was not ok.");const m=await r.json();x(`https://server-final.up.railway.app/quiz/${m.quizId}`),l(3)}catch(r){console.error("Failed to send quiz data:",r),alert("Failed to create quiz. Please try again.")}},re=()=>{l(1),q(0)},F=c=>{const r=c.target.value;C(m=>({...m,questions:m.questions.map(f=>f._id===y?{...f,question:r}:f)}))},I=()=>{oe()&&ce(t)},j=()=>{alert("Action is not allowed")};return e.jsxs("section",{className:"create-quiz",onClick:u,children:[T===1&&e.jsxs("div",{className:"createQuizWrapper",ref:Q,children:[e.jsx("input",{type:"text",placeholder:"Quiz name",value:t==null?void 0:t.quizName,readOnly:!0}),e.jsxs("div",{className:"quizType",children:[e.jsx("label",{htmlFor:"quizType",children:"Quiz Type"}),e.jsx("input",{className:t.quizType==="Q & A"?"selected":"",type:"button",value:"Q & A",onClick:j}),e.jsx("input",{className:t.quizType==="Poll Type"?"selected":"",type:"button",value:"Poll Type",onClick:j})]}),e.jsxs("div",{className:"actionBtns",children:[e.jsx("button",{onClick:d,children:"Cancel"}),e.jsx("button",{onClick:()=>l(2),children:"Continue"})]})]}),T===2&&e.jsx("div",{className:"addQuestions createQuizWrapper",ref:Q,children:e.jsxs("div",{className:"questionsWrapper",children:[e.jsxs("div",{className:"questionHeader",children:[e.jsxs("div",{className:"questionCount",children:[t.questions.map((c,r)=>e.jsxs("div",{className:"count",onClick:()=>q(r),children:[e.jsx("span",{children:r+1}),y===t.questions[r]._id&&e.jsx("div",{className:"delete",onClick:j,children:e.jsx("img",{src:ae,alt:"delete question"})})]},r)),t.questions.length<5&&e.jsx("div",{className:"addBtn",onClick:j,children:e.jsx("img",{src:Ce,alt:"add question"})})]}),e.jsx("p",{children:"Max 5 questions"})]}),e.jsxs("div",{className:"questionContainer",children:[e.jsx("input",{type:"text",placeholder:t.quizType==="Q & A"?"Question":"Poll",onChange:F,value:((X=t==null?void 0:t.questions[o])==null?void 0:X.question)||""}),e.jsxs("div",{className:"optionType",children:[e.jsx("label",{htmlFor:"optionType",children:"Option Type"}),e.jsxs("div",{className:"typeGroup",children:[e.jsx("input",{type:"radio",name:"optionType",id:"text",checked:((S=t.questions[o])==null?void 0:S.optionType)==="text",onChange:j}),e.jsx("label",{htmlFor:"text",children:"Text"})]}),e.jsxs("div",{className:"typeGroup",children:[e.jsx("input",{type:"radio",name:"optionType",id:"image",checked:((Y=t.questions[o])==null?void 0:Y.optionType)==="image",onChange:j}),e.jsx("label",{htmlFor:"image",children:"Image URL"})]}),e.jsxs("div",{className:"typeGroup",children:[e.jsx("input",{type:"radio",name:"optionType",id:"T&I",checked:((ee=t.questions[o])==null?void 0:ee.optionType)==="text and image",onChange:j}),e.jsx("label",{htmlFor:"T&I",children:"Text & Image URL"})]})]}),e.jsxs("div",{className:"option-group",children:[((se=t.questions[o])==null?void 0:se.optionType)==="text"?e.jsxs("div",{className:"options",children:[(z=t.questions[o])==null?void 0:z.options.map((c,r)=>{var m;return e.jsxs("div",{className:"optionItem",children:[(t==null?void 0:t.quizType)==="Q & A"&&e.jsx("div",{className:`checkBox ${((m=t==null?void 0:t.questions[o])==null?void 0:m.answer)===r?"selected":""}`,onClick:j,children:e.jsx("span",{})}),e.jsx("input",{type:"text",value:c.text||"",placeholder:"Text",onChange:f=>k(r,f,"text")}),e.jsx("img",{src:P,alt:"delete option",className:"deleteOption",onClick:j})]},r)}),((O=t.questions[o])==null?void 0:O.options.length)<4&&((V=t.questions[o])==null?void 0:V.optionType)&&e.jsx("div",{className:"addBtn",onClick:j,children:"Add Option"})]}):(($=t.questions[o])==null?void 0:$.optionType)==="image"?e.jsxs("div",{className:"options",children:[(H=t.questions[o])==null?void 0:H.options.map((c,r)=>{var m;return e.jsxs("div",{className:"optionItem",children:[e.jsx("div",{className:`checkBox ${((m=t==null?void 0:t.questions[o])==null?void 0:m.answer)===r?"selected":""}`,onClick:j,children:e.jsx("span",{})}),e.jsx("input",{type:"text",value:c.image||"",placeholder:"Image URL",onChange:f=>k(r,f,"image")}),e.jsx("img",{src:P,alt:"delete option",className:"deleteOption",onClick:j})]},r)}),((E=t.questions[o])==null?void 0:E.options.length)<4&&((M=t.questions[o])==null?void 0:M.optionType)&&e.jsx("div",{className:"addBtn",onClick:j,children:"Add Option"})]}):e.jsxs("div",{className:"options",children:[(U=t.questions[o])==null?void 0:U.options.map((c,r)=>{var m;return e.jsxs("div",{className:"optionItem",children:[e.jsx("div",{className:`checkBox ${((m=t==null?void 0:t.questions[o])==null?void 0:m.answer)===r?"selected":""}`,onClick:j,children:e.jsx("span",{})}),e.jsx("input",{type:"text",value:c.text||"",placeholder:"Text",style:{maxWidth:"255px"},onChange:f=>k(r,f,"text")}),e.jsx("input",{type:"text",value:c.image||"",placeholder:"Image URL",style:{maxWidth:"255px"},onChange:f=>k(r,f,"image")}),e.jsx("img",{src:P,alt:"delete option",className:"deleteOption",onClick:j})]},r)}),((R=t.questions[o])==null?void 0:R.options.length)<4&&((_=t.questions[o])==null?void 0:_.optionType)&&e.jsx("div",{className:"addBtn",onClick:j,children:"Add Option"})]}),(t==null?void 0:t.quizType)==="Q & A"&&e.jsxs("div",{className:"timer",children:[e.jsx("p",{children:"Timer"}),e.jsxs("div",{className:"timerBtns",children:[e.jsx("input",{type:"button",value:"OFF",className:`${(D=t==null?void 0:t.questions[o])!=null&&D.timer?"":"selected"}`,onClick:()=>b(null)}),e.jsx("input",{type:"button",value:"5 sec",className:`${((W=t==null?void 0:t.questions[o])==null?void 0:W.timer)===5?"selected":""}`,onClick:()=>b(5)}),e.jsx("input",{type:"button",value:"10 sec",className:`${((Z=t==null?void 0:t.questions[o])==null?void 0:Z.timer)===10?"selected":""}`,onClick:()=>b(10)})]})]})]}),e.jsxs("div",{className:"actionBtns",children:[e.jsx("button",{onClick:re,children:"Back"}),e.jsx("button",{onClick:I,children:"Update Quiz"})]})]})]})}),T===3&&e.jsxs("div",{className:"createQuizWrapper",children:[e.jsxs("div",{className:"sharePage",ref:Q,children:[e.jsx("img",{src:ae,alt:"close button",onClick:d,className:"closeBtn"}),e.jsx("h2",{children:"Congrats your Quiz is Published!"}),e.jsx("p",{children:w}),e.jsx("button",{onClick:B,children:"Share"})]}),a&&e.jsx(le,{text:"Link Copied to Clipboard",func:()=>g(!1)})]}),a&&e.jsx(le,{text:"Link copied to clipboard!",onClose:()=>g(!1)})]})};ye.propTypes={func:L.func.isRequired,data:L.object.isRequired};const Pe=()=>{const[d,s]=h.useState(!0),{state:t}=Ne(),C=je();return h.useEffect(()=>{d===!1&&C("/admin/analytics")},[d]),e.jsx("section",{className:"edit",children:d&&e.jsx(ye,{data:t,func:()=>s(!1)})})},Oe=()=>{const{section:d}=me();return e.jsx("main",{className:"controller",children:e.jsxs("div",{className:"container",children:[e.jsx(we,{}),e.jsx("div",{className:"controller-item",children:d==="dashboard"?e.jsx(be,{}):d==="analytics"?e.jsx(Be,{}):d==="edit"?e.jsx(Pe,{}):e.jsx(Ae,{})})]})})};export{Oe as default};
